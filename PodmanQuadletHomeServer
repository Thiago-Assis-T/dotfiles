[Unit]
Description=Jellyfin media server

[Container]
Image=docker.io/jellyfin/jellyfin:latest
ContainerName=jellyfin
Pod=media.pod

Volume=/home/thiago/mnt/media/config/jellyfin:/config:Z
Volume=/home/thiago/mnt/media/data/movies:/data/movies:z
Volume=/home/thiago/mnt/media/data/tvshows:/data/tvshows:z

#Volume=media_data_movies.volume:/data/movies:z
#Volume=media_data_tvshows.volume:/data/tvshows:z

Environment=TZ=America/Sao_Paulo
Environment=PUID=1000
Environment=PGID=1000


AutoUpdate=registry
Label=io.containers.autoupdate=registry

[Service]
Restart=on-failure

[Install]
WantedBy=default.target
[Unit]
Description=Media stack shared downloads volume

[Volume]
VolumeName=media_data_downloads
Device=/home/thiago/mnt/media/data/downloads
Label=app=media-stack
User=1000
Group=1000
[Unit]
Description=Media stack shared movies volume

[Volume]
VolumeName=media_data_movies
Device=/home/thiago/mnt/media/data/movies/
Label=app=media-stack
User=1000
Group=1000
[Unit]
Description=Media stack shared TV shows volume

[Volume]
VolumeName=media_data_tvshows
Label=app=media-stack
Device=/home/thiago/mnt/media/data/tvshows/
User=1000
Group=1000
[Unit]
Description=Media stack private network

[Network]
Label=app=media-stack
Driver=bridge
# ~/.config/containers/systemd/media-pod.pod
[Unit]
Description=Media stack main pod
# Depend on network (optional, but good practice)
After=media-network.service
Requires=media-network.service

[Pod]
PodName=media
PublishPort=8096:8096/tcp
PublishPort=7878:7878/tcp
PublishPort=8989:8989/tcp
PublishPort=5055:5055/tcp
PublishPort=9696:9696/tcp
#PublishPort=6881:6881/tcp
#PublishPort=6881:6881/udp
#PublishPort=8080:8080/tcp

Network=media.network

[Install]
WantedBy=default.target
[Unit]
Description=Prowlarr indexer service

[Container]
Image=docker.io/linuxserver/prowlarr:latest
ContainerName=prowlarr
Pod=media.pod

Volume=/home/thiago/mnt/media/config/prowlarr:/config:Z

Environment=PUID=1000
Environment=PGID=1000
Environment=TZ=America/Sao_Paulo
AutoUpdate=registry
Label=io.containers.autoupdate=registry

HealthCmd=curl -f http://localhost:9696/ping || exit 1

[Service]
Restart=on-failure

[Install]
WantedBy=default.target
[Unit]
Description=qBittorrent service

[Container]
Image=docker.io/linuxserver/qbittorrent:latest
ContainerName=qbittorrent
Pod=media.pod
Network=host

Volume=/home/thiago/mnt/media/config/qbittorrent:/config:Z
Volume=/home/thiago/mnt/media/data/downloads:/downloads:z
#Volume=media_data_downloads.volume:/downloads:z

Environment=PUID=1000
Environment=PGID=1000
Environment=WEBUI_PORT=8080
Environment=TORRENTING_PORT=6881
Environment=TZ=America/Sao_Paulo

PublishPort=8080:8080/tcp
PublishPort=6881:6881/tcp
PublishPort=6881:6881/udp

AutoUpdate=registry
Label=io.containers.autoupdate=registry

HealthCmd=curl -f http://localhost:8080 || exit 1

[Service]
Restart=on-failure

[Install]
WantedBy=default.target
[Unit]
Description=Radarr service

[Container]
Image=docker.io/linuxserver/radarr:latest
ContainerName=radarr
Pod=media.pod


Volume=/home/thiago/mnt/media/config/radarr:/config:Z
Volume=/home/thiago/mnt/media/data/movies:/movies:z
Volume=/home/thiago/mnt/media/data/downloads:/downloads:z
#Volume=media_data_downloads.volume:/downloads:z
#Volume=media_data_movies.volume:/movies

Environment=PUID=1000
Environment=PGID=1000
Environment=TZ=America/Sao_Paulo
AutoUpdate=registry
Label=io.containers.autoupdate=registry

HealthCmd=curl -f http://localhost:7878/ping || exit 1

[Service]
Restart=on-failure

[Install]
WantedBy=default.target
[Unit]
Description=Jellyseerr request service

[Container]
Image=ghcr.io/seerr-team/seerr:latest
ContainerName=seerr
Pod=media.pod

Volume=/home/thiago/mnt/media/config/seerr:/app/config:Z

Environment=LOG_LEVEL=debug
Environment=PORT=5055
AutoUpdate=registry
Label=io.containers.autoupdate=registry

HealthCmd=wget --no-verbose --tries=1 --spider http://localhost:5055/api/v1/status || exit 1

[Service]
Restart=on-failure

[Install]
WantedBy=default.target
[Unit]
Description=Sonarr service

[Container]
Image=docker.io/linuxserver/sonarr:latest
ContainerName=sonarr
Pod=media.pod

Volume=/home/thiago/mnt/media/config/sonarr:/config:Z
Volume=/home/thiago/mnt/media/data/tvshows:/tv:z
Volume=/home/thiago/mnt/media/data/downloads:/downloads:z
#Volume=media_data_downloads.volume:/downloads:z
#Volume=media_data_tvshows.volume:/tv:z

Environment=PUID=1000
Environment=PGID=1000
Environment=TZ=America/Sao_Paulo
AutoUpdate=registry
Label=io.containers.autoupdate=registry

HealthCmd=curl -f http://localhost:8989/ping || exit 1

[Service]
Restart=on-failure

[Install]
WantedBy=default.target
